<!doctype html>
<html>
<head>
	<title>JukeBox Demo - Multiple Streams</title>
    <meta charset="utf-8" />

	<script src="../src/Jukebox.js"></script>
	<script src="../src/Jukebox.Stream.js"></script>
	<script src="../src/Jukebox.FlashStream.js"></script>

	<style>
	#debug, #features, #codecs{
		width:98%;
		padding:1%;
		overflow-y:scroll;
		color:white;
		background:grey;
	}
	.footnote:target{
		background:yellow;
	}
	</style>
</head>
<body>

<h3>Jukebox Demo - Multiple Streams</h3>
<div>

	<strong>Play (first origin stream)</strong>:
	<button onclick="myStreams[0].play('bg-birds')">(looping) birds</button>
	<button onclick="myStreams[0].play('cricket_chirp')">cricket chirp</button>
	<button onclick="myStreams[0].play('dog_bark')">dog bark</button>
	<button onclick="myStreams[0].play('bg-chacofrogs')">(looping) chaco frogs</button>
	<button onclick="myStreams[0].play('chacofrog')">chaco frog</button>
	<p>If a stream finds out that it isn't able to play a sound, it will delegate the work to the next free channel.</p>
	<hr>

	<strong>Play (second origin stream)</strong>:
	<button onclick="myStreams[1].play('bg-street')">(looping) bg-street</button>
	<button onclick="myStreams[1].play('saxophone')">saxophone</button>
	<p>If a stream finds out that it isn't able to play a sound, it will delegate the work to the next free channel.</p>
	<hr>

	<strong>Stop</strong>:
	<button onclick="stopStreams(myStreams)">all streams</button>
	<button onclick="stopStreams([myStreams[0]])">first stream</button>
	<hr>

	<strong>Volume</strong>: (all streams)
	<button onclick="volumeStreams(myStreams, 0.1)">0.1</button>
	<button onclick="volumeStreams(myStreams, 0.5)">0.5</button>
	<button onclick="volumeStreams(myStreams, 1.0)">1.0</button>

	<br>
	<strong>Volume</strong>: (first stream)
	<button onclick="volumeStreams([myStreams[0]], 0.1)">0.1</button>
	<button onclick="volumeStreams([myStreams[0]], 0.5)">0.5</button>
	<button onclick="volumeStreams([myStreams[0]], 1.0)">1.0</button>

</div>

<hr>
<strong>Features</strong>
<div id="features"></div>

<hr>
<strong>Codecs</strong>
<div id="codecs"></div>

<hr>
<div id="debug"></div>

<script src="helper.js"></script>
<script>
var myStreams = new Jukebox([{

	"resources": [
//		"./demo/media/spritemap-forest.m4a", // buggy implementation on IE9, so preferred one is mp3
//		"./demo/media/spritemap-forest.amr", // every phone supports 3gp / amr codec due to GSM voice encoding - just awesome fallback method!
		"media/spritemap-forest.ac3",
		"media/spritemap-forest.mp3",
		"media/spritemap-forest.ogg"
	],

	"autoplay": "bg-birds",
	"spritemap": {

		"bg-birds": {
			"start": 1.00,
			"end": 41.00,
			"loop": true
		},

		"cricket_chirp": {
			"start": 42.00,
			"end": 44.75
		},

		"dog_bark": {
			"start": 46.00,
			"end": 47.50
		},

		"bg-chacofrogs": {
			"start": 51.00,
			"end": 81.00,
			"loop": true
		},

		"chacofrog": {
			"start": 82.00,
			"end": 85.90 // crappy audio api says that the stream ends at 84.9760 instead of 85.00 as it does =/
		}

	}

}, {

	"resources": [
		"media/spritemap-urban.ac3",
		"media/spritemap-urban.mp3",
		"media/spritemap-urban.ogg"
	],

	"autoplay": "bg-street",

	"spritemap": {

		"bg-street": {
			"start": 1.00,
			"end": 326.00,
			"loop": true
		},

		"saxophone": {
			"start": 331.00,
			"end": 353.00 // see settings[0] (above)
		}

	}

}], function(jukebox) {

	var features = [],
		codecs = [];

	var f;
	for (f in jukebox.features) {
		features.push(f + ' = ' + jukebox.features[f]);
	}

	for (f in jukebox.codecs) {
		codecs.push(f + ' = ' + jukebox.codecs[f]);
	}

	document.getElementById('features').innerHTML = features.join('<br>');
	document.getElementById('codecs').innerHTML = codecs.join('<br>');

}); 

</script>
</body>
</html>
